<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts热力日历图</title>
    <script src="https://cdn.jsdelivr.net/npm/echarts@5.4.3/dist/echarts.min.js"></script>
</head>
<body>
<div id="chart" style="width: 1000px;height:700px;"></div>
<script>
    var myChart = echarts.init(document.getElementById('chart'));

    function getVirtualData(year) {
        const date = +echarts.time.parse(year + '-01-01');
        const end = +echarts.time.parse(+year + 1 + '-01-01');
        const dayTime = 3600 * 24 * 1000;
        const data = [];
        for (let time = date; time < end; time += dayTime) {
            // 模拟一些数据
            let value = Math.floor(Math.random() * 10000);
            // 周末增加值
            const day = echarts.time.format(time, '{d}', false);
            const weekday = echarts.time.format(time, '{w}', false);
            if (weekday === '0' || weekday === '6') {
                value = value * 1.5;
            }
            // 节假日增加值
            if (
                (echarts.time.format(time, '{M}{d}', false) === '0101') ||
                (echarts.time.format(time, '{M}{d}', false) === '0501') ||
                (echarts.time.format(time, '{M}{d}', false) === '1001') ||
                (echarts.time.format(time, '{M}{d}', false) === '1225')
            ) {
                value = value * 2;
            }
            data.push([
                echarts.time.format(time, '{yyyy}-{MM}-{dd}', false),
                value
            ]);
        }
        return data;
    }

    const data = getVirtualData('2023');

    var option = {
        title: {
            top: 30,
            left: 'center',
            text: '2025年电商平台日访问量热力图'
        },
        tooltip: {
            formatter: function (params) {
                return params.value[0] + ': ' + params.value[1] + ' 访问量';
            }
        },
        visualMap: {
            min: 0,
            max: 10000,
            type: 'piecewise',
            orient: 'horizontal',
            left: 'center',
            top: 65,
            inRange: {
                color: ['#ebedf0', '#c6e48b', '#7bc96f', '#239a3b', '#196127']
            },
            textStyle: {
                color: '#000'
            },
            pieces: [
                { min: 0, max: 1000, label: '很少' },
                { min: 1000, max: 3000, label: '较少' },
                { min: 3000, max: 5000, label: '一般' },
                { min: 5000, max: 8000, label: '较多' },
                { min: 8000, label: '很多' }
            ]
        },
        calendar: [
            {
                top: 120,
                left: 30,
                right: 30,
                cellSize: ['auto', 15],
                range: '2023',
                itemStyle: {
                    borderWidth: 0.5
                },
                yearLabel: { show: true }
            }
        ],
        series: [
            {
                type: 'heatmap',
                coordinateSystem: 'calendar',
                data: data,
                emphasis: {
                    itemStyle: {
                        shadowBlur: 10,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };

    myChart.setOption(option);
</script>
</body>
</html>